# EffectiveMobileAPI

EffectiveMobileAPI — это RESTful API для управления музыкальной библиотекой, позволяющий пользователям добавлять, обновлять, удалять и извлекать песни и их информацию.

## Содержание
- [Особенности](#особенности)
- [Технологии](#технологии)
- [Начало работы](#начало-работы)
- [Установка](#установка)
- [API Эндпоинты](#api-эндпоинты)
- [Дополнительная информация](#дополнительная-информация)

## Особенности
- Добавление новых песен в библиотеку.
- Обновление информации о существующих песнях.
- Удаление песен из библиотеки.
- Извлечение текста песен.
- Получение подробной информации о конкретных песнях.
- Извлечение полной библиотеки песен.

## Технологии
- Go (Golang)
- PostgreSQL
- Chi (HTTP роутер)
- Slog (логгер)
- Swagger для документации API

## Начало работы

Чтобы запустить этот проект на своем локальном компьютере, выполните следующие шаги:

### Предварительные требования
- Go 1.18+
- Docker (опционально, для запуска PostgreSQL в контейнере)
- PostgreSQL

### Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/EffectiveMobileAPI.git
   cd EffectiveMobileAPI

2. Запуск приложения:
   ```bash
   docker-compose up
   docker-compose exec db psql -U postgres
   CREATE DATABASE db;
   docker-compose up --build

## API Эндпоинты

1. **Add song**
   - **Endpoint:** `POST /EffectiveMobile/AddSong`
   - **Тело запроса:** JSON-объект, содержащий:
     - `song`: Название песни
     - `group`: Имя артиста/музыкальной группы
   - **Ответ:** 
     - `200 OK` при успешном добавлении песни
     - `400 Bad Request`, если ошибка запроса
     - `500 Status Internal Server`, ошибка базы данных

2. **Change info**
   - **Эндпоинт:** `POST /EffectiveMobile/ChangeInfo?id=*`
   - **Ответ:** 
     - `200 OK` при изменении данных у песни
     - `400 Bad Request`, ошибка запроса
     - `500 Status Internal Server`, ошибка базы данных

3. **Delete song**
   - **Эндпоинт:** `DELETE /EffectiveMobile/DeleteSong?id=*`
   - **Ответ:** 
     - `200 OK` при удачном удалении песни
     - `400 Bad Request`, ошибка запроса
     - `500 Status Internal Server`, ошибка базы данных

4. **Text song**
   - **Эндпоинт:** `GET /EffectiveMobile/TextSong?id=3`
   - **Ответ:** 
     - `200 OK` при успешном получении текста
     - `400 Bad Request`, ошибка запроса
     - `500 Status Internal Server`, ошибка базы данных
   
5. **Library(наших песен)**
   - **Эндпоинт:** `GET /EffectiveMobile/Library`
   - **Ответ:** 
     - `200 OK` при успешном получении всех данных песен
     - `400 Bad Request`, ошибка запроса
     - `500 Status Internal Server`, ошибка базы данных

6. **Library(наших песен)**
   - **Эндпоинт:** `GET /EffectiveMobile/info?group=*&song=*`
   - **Ответ:** 
     - `200 OK` при получении дополнительных сведениях о песни
     - `400 Bad Request`, ошибка запроса
     - `500 Status Internal Server`, ошибка базы данных
    
7. **Library(всез песен в библиотеки)**
- **Эндпоинт:** `GET /Library`
- **Ответ:** 
  - `200 OK` при успешном получении всех данных песен
  - `400 Bad Request`, ошибка запроса
  - `500 Status Internal Server`, ошибка базы данных
 
### Дополнительня информация

- Чтобы не делать один и тот же код для второго апи я разделил их началом url, а так же не занимать второй порт.
- При добавлении песни мы сначала сверяемся с общей библеотекой `Library` только после этого песня добавляется в наш локальный каталог.
- Миграции в БД происходят сразу при запуске докера, в первый раз его нужно заупустить и создать БД с именем db, после этого перезапустить докере,
поэтому во втором пункте мы перезапускаем докер.

